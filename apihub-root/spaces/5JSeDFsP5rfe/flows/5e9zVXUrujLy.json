{"name":"AddChapter","content":"({\n\tstart: async function(documentId, title){\n\t\tif(!title){\n\t\t\ttitle=\"NewChapter\";\n\t\t}\n\t\ttry{\n\t\t\tlet document = webSkel.currentUser.space.getDocument(documentId);\n\t\t\tlet chapterData={\n\t\t\t\ttitle:title,\n\t\t\t\tid:webSkel.getService(\"UtilsService\").generateId(),\n\t\t\t\tparagraphs:[{\n\t\t\t\t\t\ttext:\"New Paragraph\",\n\t\t\t\t\t\tid:webSkel.getService(\"UtilsService\").generateId()\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\tlet position = document.chapters.length;\n\t\t\tif(webSkel.currentUser.space.currentChapterId){\n\t\t\t\tposition = document.chapters.findIndex(chapter=>chapter.id===webSkel.currentUser.space.currentChapterId)+1;\n\t\t\t}\n\t\t\tawait document.addChapter(chapterData, position);\n\t\t\twebSkel.currentUser.space.currentChapterId = chapterData.id;\n\t\t\twebSkel.currentUser.space.currentParagraphId = chapterData.paragraphs[0].id;\n\t\t\tthis.return(title);\n\t\t\t}catch(e){\n\t\t\t\tthis.fail(e);\n\t\t\t}\n\t}\n})","id":"5e9zVXUrujLy","description":"Adds a new chapter to a document","tags":["presenters","agents","documents"]}