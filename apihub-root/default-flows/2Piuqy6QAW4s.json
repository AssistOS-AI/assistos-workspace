{
  "name": "GenerateChapters",
  "content": "({\nstart: function(ideas,  documentId, details){\n    let document = webSkel.currentUser.space.getDocument(documentId);\n    this.prompt = ` ${details.prompt || \"Please generate chapters based on the following array of ideas\"} :\"${ideas}\" and \"${document.getMainIdeas()}\". Generate ${details.nr || \"one chapter per idea\"} chapters. Please put all chapters in an array. A chapter should have the following structure: \n {\"title\":\"Chapter Title\", \"mainIdeas\":[\"paragraph 1 summary\", \"paragraph 2 summary\", ... , \"paragraph n summary\"], \"paragraphs\":[{\"text\":\"paragraph 1 text\", \"mainIdea\":\"paragraph 1 summary\"}, {\"text\":\"paragraph 2 text\", \"mainIdea\":\"paragraph 2 summary\"}, ... {\"text\":\"paragraph n text\", \"mainIdea\":\"paragraph n summary\"}]}.`;\n\n    this.setDefaultValues();\n    this.setIntelligenceLevel(3);\n    this.execute(document, ideas);\n    },\nexecute: async function(document, ideas){\n    let chapters = await this.request(this.prompt);\n    try{\n        let chaptersObj = JSON.parse(chapters);\n        await document.addChapters(chaptersObj, JSON.parse(ideas));\n        await webSkel.changeToDynamicPage(\"manage-chapters-page\", `documents/${document.id}/manage-chapters-page`);\n    }catch(e){\n        this.fail(e);\n        }\n    this.return(chapters);\n    }\n})",
  "id": "2Piuqy6QAW4s",
  "description": "generates chapters based on some ideas"
}