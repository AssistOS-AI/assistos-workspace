{"name":"generate chapters","content":"({\nstart: function(ideas,  documentId, userDetails){\nlet document = webSkel.currentUser.space.getDocument(documentId);\n\n this.prompt = ` ${userDetails.prompt || \"Please generate chapters based on the following array of ideas\"} :\"${ideas}\" and \"${document.getMainIdeas()}\". Generate ${userDetails.chaptersNr || \"one chapter per idea\"} chapters. Please put all chapters in an array. A chapter should have the following structure: \n {\"title\":\"Chapter Title\", \"mainIdeas\":[\"paragraph 1 summary\", \"paragraph 2 summary\", ... , \"paragraph n summary\"], \"paragraphs\":[{\"text\":\"paragraph 1 text\", \"mainIdea\":\"paragraph 1 summary\"}, {\"text\":\"paragraph 2 text\", \"mainIdea\":\"paragraph 2 summary\"}, ... {\"text\":\"paragraph n text\", \"mainIdea\":\"paragraph n summary\"}]}.`;\n\nthis.setDefaultValues();\nthis.setIntelligenceLevel(3);\nthis.execute(document, ideas);\n},\nexecute: async function(document, ideas){\nlet chapters = await this.request(this.prompt);\ntry{\nlet chaptersObj = JSON.parse(chapters);\nawait document.addChapters(chaptersObj, JSON.parse(ideas));\nawait webSkel.changeToDynamicPage(\"manage-chapters-page\", `documents/${document.id}/manage-chapters-page`);\n\n}catch(e){\nthis.fail(e);\n}\nthis.return(chapters);\n}\n})","id":"2Piuqy6QAW4s","description":"generates chapters based on an array of ideas"}